<nav class="flex-1 px-2 py-4 space-y-1 overflow-y-auto">
  
  <!-- Dashboard -->
  <a routerLink="/home" 
     routerLinkActive="bg-blue-100 text-blue-600" 
     class="flex items-center gap-3 px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-all duration-200">
    <span class="text-lg">
      <mat-icon>dashboard</mat-icon>
    </span> 
    Overview
  </a>

   
  <!-- 1. Purchase - Collapsible Section -->
  <div>
    
    <ul 
      class="ml-4 space-y-1 overflow-hidden transition-all duration-300"
      >

      <!-- Purchase Quotations - Collapsible (moved from Admin) -->
      <!-- <li>
        <button 
          type="button"
          (click)="togglePurchaseQuotations()"
          [class.bg-blue-50]="isPurchaseQuotationsExpanded"
          [class.text-blue-600]="isPurchaseQuotationsExpanded"
          class="flex items-center justify-between w-full px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200 cursor-pointer">
          <span class="flex items-center gap-3">
            <span class="text-lg">
              <mat-icon>request_quote</mat-icon>
            </span>
            Purchase Quotations
          </span>
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            class="h-4 w-4 transition-transform duration-200" 
            [class.rotate-180]="isPurchaseQuotationsExpanded"
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <ul 
          class="ml-8 space-y-1 overflow-hidden transition-all duration-300"
          [ngClass]="{'max-h-0': !isPurchaseQuotationsExpanded, 'max-h-96': isPurchaseQuotationsExpanded}">
          <li><a routerLink="/home/purchase-quotation/all" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">All Purchase Quotations</a></li>
          <li><a routerLink="/home/purchase-quotation/create" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Create Purchase Quotation</a></li>
        </ul>
      </li> -->

      <!-- Purchase Orders - Direct Link (like Production) -->
      <li  *ngIf="authService.hasPermission('PURCHASE_READ')">
        <a routerLink="/home/purchase-order" 
           routerLinkActive="bg-blue-50 text-blue-600" 
           class="flex items-center gap-3 px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">
          <span class="text-lg">
            <mat-icon>shopping_bag</mat-icon>
          </span>
          Purchase Orders
        </a>
      </li>

      <!-- Budget - Direct Link -->
      <li *ngIf="authService.hasPermission('BUDGET_READ')">
        <a routerLink="/home/budget" 
           routerLinkActive="bg-blue-50 text-blue-600" 
           class="flex items-center gap-3 px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">
          <span class="text-lg">
            <mat-icon>account_balance_wallet</mat-icon>
          </span>
          Budget
        </a>
      </li>

      <!-- Purchase Items - Collapsible (moved from Admin) -->
      <!-- <li>
        <button 
          type="button"
          (click)="togglePurchaseItems()"
          [class.bg-blue-50]="isPurchaseItemsExpanded"
          [class.text-blue-600]="isPurchaseItemsExpanded"
          class="flex items-center justify-between w-full px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200 cursor-pointer">
          <span class="flex items-center gap-3">
            <span class="text-lg">
              <mat-icon>shopping_cart</mat-icon>
            </span>
            Purchase Items
          </span>
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            class="h-4 w-4 transition-transform duration-200" 
            [class.rotate-180]="isPurchaseItemsExpanded"
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <ul 
          class="ml-8 space-y-1 overflow-hidden transition-all duration-300"
          [ngClass]="{'max-h-0': !isPurchaseItemsExpanded, 'max-h-96': isPurchaseItemsExpanded}">
          <li><a routerLink="/home/purchase-item" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Purchase Items</a></li>
        </ul>
      </li> -->

    </ul>
  </div>

  <!-- 2. Production -->
  <a *ngIf="authService.hasPermission('PRODUCTION_READ')"
    routerLink="/home/production-order" 
     routerLinkActive="bg-blue-100 text-blue-600" 
     class="flex items-center gap-3 px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-all duration-200">
    <span class="text-lg">
      <mat-icon>build_circle</mat-icon>
    </span> 
    Production
  </a>

  <!-- 3. Point of Sale - Collapsible Section -->
  <div *ngIf="authService.hasPermission('SALE_READ')">
    <button 
      type="button"
      (click)="togglePointOfSale()"
      [class.bg-blue-50]="isPointOfSaleExpanded"
      [class.text-blue-600]="isPointOfSaleExpanded"
      class="flex items-center justify-between w-full px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-all duration-200 cursor-pointer">
      <span class="flex items-center gap-3">
        <span class="text-lg">
          <mat-icon>point_of_sale</mat-icon>
        </span>
        Point of Sale
      </span>
      <svg 
        xmlns="http://www.w3.org/2000/svg" 
        class="h-4 w-4 transition-transform duration-200" 
        [class.rotate-180]="isPointOfSaleExpanded"
        fill="none" 
        viewBox="0 0 24 24" 
        stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
      </svg>
    </button>

    <ul 
      class="ml-4 space-y-1 overflow-hidden transition-all duration-300"
      [ngClass]="{'max-h-0': !isPointOfSaleExpanded, 'max-h-[2000px]': isPointOfSaleExpanded}">

      <!-- Sales Orders - Collapsible (moved from Admin) -->
      <li>
        <button 
          type="button"
          (click)="toggleSalesOrders()"
          [class.bg-blue-50]="isSalesOrdersExpanded"
          [class.text-blue-600]="isSalesOrdersExpanded"
          class="flex items-center justify-between w-full px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200 cursor-pointer">
          <span class="flex items-center gap-3">
            <span class="text-lg">
              <mat-icon>receipt_long</mat-icon>
            </span>
            Sales Orders
          </span>
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            class="h-4 w-4 transition-transform duration-200" 
            [class.rotate-180]="isSalesOrdersExpanded"
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <ul 
          class="ml-8 space-y-1 overflow-hidden transition-all duration-300"
          [ngClass]="{'max-h-0': !isSalesOrdersExpanded, 'max-h-96': isSalesOrdersExpanded}">
          <li><a routerLink="/home/sales-order" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">All Sales Orders</a></li>
          <li><a routerLink="/home/sales-order/create" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Create Sales Order</a></li>
        </ul>
      </li>

      <!-- Sales Items - Collapsible (moved from Admin) -->
      <li>
        <button 
          type="button"
          (click)="toggleSalesItems()"
          [class.bg-blue-50]="isSalesItemsExpanded"
          [class.text-blue-600]="isSalesItemsExpanded"
          class="flex items-center justify-between w-full px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200 cursor-pointer">
          <span class="flex items-center gap-3">
            <span class="text-lg">
              <mat-icon>inventory</mat-icon>
            </span>
            Sales Items
          </span>
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            class="h-4 w-4 transition-transform duration-200" 
            [class.rotate-180]="isSalesItemsExpanded"
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <ul 
          class="ml-8 space-y-1 overflow-hidden transition-all duration-300"
          [ngClass]="{'max-h-0': !isSalesItemsExpanded, 'max-h-96': isSalesItemsExpanded}">
          <li><a routerLink="/home/sales-items" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">All Sales Items</a></li>
          <li><a routerLink="/home/sales-items/create" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Create Sales Item</a></li>
        </ul>
      </li>

      <!-- Sales Credit - Collapsible (moved from Admin) -->
      <li>
        <button 
          type="button"
          (click)="toggleSalesCredit()"
          [class.bg-blue-50]="isSalesCreditExpanded"
          [class.text-blue-600]="isSalesCreditExpanded"
          class="flex items-center justify-between w-full px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200 cursor-pointer">
          <span class="flex items-center gap-3">
            <span class="text-lg">
              <mat-icon>credit_card</mat-icon>
            </span>
            Sales Credit
          </span>
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            class="h-4 w-4 transition-transform duration-200" 
            [class.rotate-180]="isSalesCreditExpanded"
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <ul 
          class="ml-8 space-y-1 overflow-hidden transition-all duration-300"
          [ngClass]="{'max-h-0': !isSalesCreditExpanded, 'max-h-96': isSalesCreditExpanded}">
          <li><a routerLink="/home/sales-credit" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">All Sales Credits</a></li>
          <li><a routerLink="/home/sales-credit/create" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Create Sales Credit</a></li>
          <li><a routerLink="/home/sales-credit/pending" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Pending Credits</a></li>
        </ul>
      </li>

      <!-- Sales Promotion - Collapsible (moved from Admin) -->
      <li>
        <button 
          type="button"
          (click)="toggleSalesPromotion()"
          [class.bg-blue-50]="isSalesPromotionExpanded"
          [class.text-blue-600]="isSalesPromotionExpanded"
          class="flex items-center justify-between w-full px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200 cursor-pointer">
          <span class="flex items-center gap-3">
            <span class="text-lg">
              <mat-icon>local_offer</mat-icon>
            </span>
            Sales Promotion
          </span>
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            class="h-4 w-4 transition-transform duration-200" 
            [class.rotate-180]="isSalesPromotionExpanded"
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <ul 
          class="ml-8 space-y-1 overflow-hidden transition-all duration-300"
          [ngClass]="{'max-h-0': !isSalesPromotionExpanded, 'max-h-96': isSalesPromotionExpanded}">
          <li><a routerLink="/home/sales-promotion" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">All Promotions</a></li>
          <li><a routerLink="/home/sales-promotion/create" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Create Promotion</a></li>
          <li><a routerLink="/home/sales-promotion/by-stock" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Promotions by Stock</a></li>
        </ul>
      </li>

    </ul>
  </div>

  <!-- 4. Credit Management -->
  <a *ngIf="authService.hasPermission('CREDIT_READ')" 
  routerLink="/home/credit-management" 
     routerLinkActive="bg-blue-100 text-blue-600" 
     class="flex items-center gap-3 px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-all duration-200">
    <span class="text-lg">
      <mat-icon>credit_score</mat-icon>
    </span> 
    Credit Management
  </a>


   <!-- Customers -->
  <a *ngIf="authService.hasPermission('CUSTOMER_READ')" 
    routerLink="/home/customers" 
     routerLinkActive="bg-blue-100 text-blue-600" 
     class="flex items-center gap-3 px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-all duration-200">
    <span class="text-lg">
      <mat-icon>Customers</mat-icon>
    </span> 
    Customers
  </a>

  <!-- Stock Transfer List -->
  <a *ngIf="authService.hasPermission('STOCK_TRANSFER_READ')" 
     routerLink="/home/ck-transfer" 
     routerLinkActive="bg-blue-100 text-blue-600" 
     class="flex items-center gap-3 px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-all duration-200">
    <span class="text-lg">
      <mat-icon>pending-stock-transfer</mat-icon>
    </span> 
    Stock Transfer List
  </a>

  <!-- Other Expenses -->
  <a routerLink="/home/other-expense" 
     routerLinkActive="bg-blue-100 text-blue-600" 
     class="flex items-center gap-3 px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-all duration-200">
    <span class="text-lg">
      <mat-icon>payments</mat-icon>
    </span> 
    Other Expenses
  </a>

  <!-- Other Incomes -->
  <a routerLink="/home/other-income" 
     routerLinkActive="bg-blue-100 text-blue-600" 
     class="flex items-center gap-3 px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-all duration-200">
    <span class="text-lg">
      <mat-icon>account_balance_wallet</mat-icon>
    </span> 
    Other Incomes
  </a>

  <!-- 5. Reports -->
  <a *ngIf="authService.hasPermission('REPORT_READ')" 
  routerLink="/home/reports" 
     routerLinkActive="bg-blue-100 text-blue-600" 
     class="flex items-center gap-3 px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-all duration-200">
    <span class="text-lg">
      <mat-icon>bar_chart</mat-icon>
    </span> 
    Reports
  </a>

  <!-- 6. Admin - Collapsible Section -->
  <div >
    <button pending-sto
      type="button"
      (click)="toggleAdmin()"
      [class.bg-blue-50]="isAdminExpanded"
      [class.text-blue-600]="isAdminExpanded"
      class="flex items-center justify-between w-full px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-all duration-200 cursor-pointer">
      <span class="flex items-center gap-3">
        <span class="text-lg">
          <mat-icon>admin_panel_settings</mat-icon>
        </span>
        Admin
      </span>
      <svg 
        xmlns="http://www.w3.org/2000/svg" 
        class="h-4 w-4 transition-transform duration-200" 
        [class.rotate-180]="isAdminExpanded"
        fill="none" 
        viewBox="0 0 24 24" 
        stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
      </svg>
    </button>

    <!-- Admin Submenu -->
    <ul 
      class="ml-4 space-y-1 overflow-hidden transition-all duration-300"
      [ngClass]="{'max-h-0': !isAdminExpanded, 'max-h-[2000px]': isAdminExpanded}">
      
      <!-- User Management - Collapsible -->
      <li>
        <button 
          type="button"
          (click)="toggleUserManagement()"
          [class.bg-blue-50]="isUserManagementExpanded"
          [class.text-blue-600]="isUserManagementExpanded"
          class="flex items-center justify-between w-full px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200 cursor-pointer">
          <span class="flex items-center gap-3">
            <span class="text-lg">
              <mat-icon>group</mat-icon>
            </span>
            User Management
          </span>
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            class="h-4 w-4 transition-transform duration-200" 
            [class.rotate-180]="isUserManagementExpanded"
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <ul 
          class="ml-8 space-y-1 overflow-hidden transition-all duration-300"
          [ngClass]="{'max-h-0': !isUserManagementExpanded, 'max-h-96': isUserManagementExpanded}">
          <li
          *ngIf="authService.hasPermission('ROLE_READ')"><a routerLink="/home/user-management/users" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Users</a></li>
          <li *ngIf="authService.hasPermission('ROLE_READ')"><a routerLink="/home/user-management/user-roles" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">User Roles</a></li>
          <li 
          *ngIf="authService.hasPermission('DEPARTMENT_READ')"><a routerLink="/home/user-management/departments" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Departments</a></li>
          <li 
          *ngIf="authService.hasPermission('PERMISSION_READ')"><a routerLink="/home/user-management/permissions" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Permissions</a></li>
          <li
          *ngIf="authService.hasPermission('UNIT_READ')"><a routerLink="/home/user-management/units" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Units</a></li>
        </ul>
      </li>

      <!-- Supplier Management - Collapsible -->
      <li *ngIf="authService.hasPermission('SUPPLIER_READ')">
        <button 
          type="button"
          (click)="toggleSupplierManagement()"
          [class.bg-blue-50]="isSupplierManagementExpanded"
          [class.text-blue-600]="isSupplierManagementExpanded"
          class="flex items-center justify-between w-full px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200 cursor-pointer">
          <span class="flex items-center gap-3">
            <span class="text-lg">
              <mat-icon>assignment</mat-icon>
            </span>
            Supplier Management
          </span>
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            class="h-4 w-4 transition-transform duration-200" 
            [class.rotate-180]="isSupplierManagementExpanded"
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <ul 
          class="ml-8 space-y-1 overflow-hidden transition-all duration-300"
          [ngClass]="{'max-h-0': !isSupplierManagementExpanded, 'max-h-96': isSupplierManagementExpanded}">
          <li><a routerLink="/home/supplier-management/suppliers" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">All Suppliers</a></li>
          <li><a routerLink="/home/supplier-management/create-supplier" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Create Supplier</a></li>
          <li><a routerLink="/home/supplier-management/active-suppliers" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Active Suppliers</a></li>
          <li><a routerLink="/home/supplier-management/supplier-history" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Supplier History</a></li>
          <li><a routerLink="/home/supplier-management/outstanding-payments" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Outstanding Payments</a></li>
        </ul>
      </li>

      <!-- Store Management - Collapsible -->
      <li *ngIf="authService.hasPermission('STORE_READ')">
        <button 
          type="button"
          (click)="toggleStoreManagement()"
          [class.bg-blue-50]="isStoreManagementExpanded"
          [class.text-blue-600]="isStoreManagementExpanded"
          class="flex items-center justify-between w-full px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200 cursor-pointer">
          <span class="flex items-center gap-3">
            <span class="text-lg">
              <mat-icon>store</mat-icon>
            </span>
            Store Management
          </span>
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            class="h-4 w-4 transition-transform duration-200" 
            [class.rotate-180]="isStoreManagementExpanded"
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <ul 
          class="ml-8 space-y-1 overflow-hidden transition-all duration-300"
          [ngClass]="{'max-h-0': !isStoreManagementExpanded, 'max-h-96': isStoreManagementExpanded}">
          <li><a routerLink="/home/store/" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">All Stores</a></li>
        </ul>
      </li>

      <!-- Bank Accounts Management - Collapsible -->
      <li *ngIf="authService.hasPermission('BANK_ACCOUNT_READ')">
        <button 
          type="button"
          (click)="toggleBankAccounts()"
          [class.bg-blue-50]="isBankAccountsExpanded"
          [class.text-blue-600]="isBankAccountsExpanded"
          class="flex items-center justify-between w-full px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200 cursor-pointer">
          <span class="flex items-center gap-3">
            <span class="text-lg">
              <mat-icon>account_balance</mat-icon>
            </span>
            Bank Accounts Management
          </span>
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            class="h-4 w-4 transition-transform duration-200" 
            [class.rotate-180]="isBankAccountsExpanded"
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <ul 
          class="ml-8 space-y-1 overflow-hidden transition-all duration-300"
          [ngClass]="{'max-h-0': !isBankAccountsExpanded, 'max-h-96': isBankAccountsExpanded}">
          <li><a routerLink="/home/bank-account" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Bank Accounts</a></li>
        </ul>
      </li>

      <!-- Production Order - Collapsible -->
      <!-- <li>
        <button 
          type="button"
          (click)="toggleProductionOrder()"
          [class.bg-blue-50]="isProductionOrderExpanded"
          [class.text-blue-600]="isProductionOrderExpanded"
          class="flex items-center justify-between w-full px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200 cursor-pointer">
          <span class="flex items-center gap-3">
            <span class="text-lg">
              <mat-icon>receipt_long</mat-icon>
            </span>
            Production Order
          </span>
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            class="h-4 w-4 transition-transform duration-200" 
            [class.rotate-180]="isProductionOrderExpanded"
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <ul 
          class="ml-8 space-y-1 overflow-hidden transition-all duration-300"
          [ngClass]="{'max-h-0': !isProductionOrderExpanded, 'max-h-96': isProductionOrderExpanded}">
          <li><a routerLink="/home/production-order" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Production Order</a></li>
        </ul>
      </li> -->

     

     

      <!-- Items Management - Direct Link -->
      <li *ngIf="authService.hasPermission('ITEM_READ')">
        <a routerLink="/home/items-management" 
           routerLinkActive="bg-blue-50 text-blue-600" 
           class="flex items-center gap-3 px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">
          <span class="text-lg">
            <mat-icon>inventory_2</mat-icon>
          </span>
          Items Management
        </a>
      </li>
      
      <!-- Customer Management - Collapsible -->
      <li>
        <button 
          type="button"
          (click)="toggleCustomerManagement()"
          [class.bg-blue-50]="isCustomerManagementExpanded"
          [class.text-blue-600]="isCustomerManagementExpanded"
          class="flex items-center justify-between w-full px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200 cursor-pointer">
          <span class="flex items-center gap-3">
            <span class="text-lg">
              <mat-icon>people</mat-icon>
            </span>
            Customer Management
          </span>
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            class="h-4 w-4 transition-transform duration-200" 
            [class.rotate-180]="isCustomerManagementExpanded"
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <ul 
          class="ml-8 space-y-1 overflow-hidden transition-all duration-300"
          [ngClass]="{'max-h-0': !isCustomerManagementExpanded, 'max-h-96': isCustomerManagementExpanded}">
          <li><a routerLink="/home/customer-management/customers" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">All Customers</a></li>
          <li><a routerLink="/home/customer-management/create-customer" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Create Customer</a></li>
          <li><a routerLink="/home/customer-management/active-customers" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Active Customers</a></li>
          <li><a routerLink="/home/customer-management/customer-history" routerLinkActive="bg-blue-50 text-blue-600" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">Customer History</a></li>
        </ul>
      </li>
      
      <!-- Settings -->
      <li>
        <a routerLink="/home/settings" 
           routerLinkActive="bg-blue-50 text-blue-600" 
           class="flex items-center gap-3 px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-all duration-200">
          <span class="text-lg">
            <mat-icon>settings</mat-icon>
          </span>
          Settings
        </a>
      </li>
      
    </ul>
  </div>
  
  <!-- Logout -->
  <a (click)="onLogout()" 
     class="flex items-center gap-3 px-4 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 cursor-pointer mt-4">
    <span class="text-lg">
      <mat-icon>logout</mat-icon>
    </span> 
    Logout
  </a>
  
</nav>