<div class="font-sans">
  <!-- Main Card Container -->
  <div class="max-w-7xl mx-auto bg-white shadow-2xl rounded-3xl p-6 sm:p-10">

    <!-- Header and Controls -->
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4 border-b pb-4">
      <h2 class="text-3xl sm:text-4xl font-extrabold text-gray-900">
        Permission Management
      </h2>

      <button
        (click)="openModal()"
        class="px-6 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-semibold shadow-md 
               hover:bg-indigo-700 transition-all duration-150 active:scale-95 
               focus:ring focus:ring-indigo-300 focus:ring-offset-2 w-full sm:w-auto">
        <span class="inline-flex items-center">
          <svg class="h-5 w-5 mr-1.5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
          </svg>
          New Permission
        </span>
      </button>
    </div>

    <!-- Search Section -->
    <div class="mb-6">
      <div class="relative w-full sm:w-72">
        <input
          type="text"
          [(ngModel)]="searchTerm"
          (input)="searchPermissions()"
          placeholder="Search permission type..."
          class="w-full pl-10 pr-4 py-2.5 text-sm border-2 border-gray-300 rounded-xl 
                 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"
        />
        <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"
          xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </div>
    </div>

    <!-- Permissions Table -->
    <div class="overflow-x-auto shadow-lg rounded-xl border border-gray-200">
      <table class="w-full border-collapse min-w-[700px]">

        <!-- Table Header -->
        <thead class="bg-indigo-600 text-white sticky top-0 shadow-md">
          <tr>
            <th class="px-6 py-4 text-left text-sm font-medium rounded-tl-xl">#</th>
            <th class="px-6 py-4 text-left text-sm font-medium">Permission Type</th>
            <th class="px-6 py-4 text-center text-sm font-medium rounded-tr-xl">Actions</th>
          </tr>
        </thead>

        <!-- Table Body -->
        <tbody class="bg-white divide-y divide-gray-100">
          <tr
            *ngFor="let permission of permissions; let i = index; even as isEven"
            class="transition-colors hover:bg-indigo-50"
            [class.bg-white]="!isEven"
            [class.bg-gray-50]="isEven"
          >
            <td class="px-6 py-4 text-sm font-medium text-gray-800">{{ i + 1 }}</td>
            <td class="px-6 py-4 text-sm text-gray-700 font-semibold">{{ permission.permissionType }}</td>

            <td class="px-6 py-4 text-center text-sm space-x-3">

              <!-- Edit Button -->
              <button
                (click)="openModal(permission)"
                class="px-4 py-2 bg-yellow-500 text-white rounded-full text-sm font-medium shadow-sm 
                       hover:bg-yellow-600 transition-all duration-150 active:scale-95 
                       focus:ring focus:ring-yellow-300">
                Edit
              </button>

              <!-- Delete Button -->
              <button
                (click)="deletePermission(permission.id!)"
                class="px-4 py-2 bg-red-500 text-white rounded-full text-sm font-medium shadow-sm 
                       hover:bg-red-600 transition-all duration-150 active:scale-95 
                       focus:ring focus:ring-red-300">
                Delete
              </button>

            </td>
          </tr>

          <!-- Empty State -->
          <tr *ngIf="!permissions || permissions.length === 0">
            <td colspan="3" class="text-center p-8 text-lg text-gray-500 bg-gray-50">
              No permissions found.
            </td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>

<!-- Modal -->
<div
  *ngIf="isModalOpen"
  class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 p-4 sm:p-6"
>
  <div class="bg-white w-full max-w-md mx-auto p-6 sm:p-8 rounded-3xl shadow-2xl relative animate-fadeIn">

    <!-- Modal Title -->
    <h3 class="text-2xl sm:text-3xl font-extrabold text-gray-900 mb-6 text-center">
      {{ isEditing ? 'Edit Permission' : 'Create Permission' }}
    </h3>

    <!-- Permission Input -->
    <label class="block mb-6">
      <span class="text-sm font-semibold text-gray-700">Permission Type</span>
      <input
        type="text"
        [(ngModel)]="newPermission.permissionType"
        class="w-full mt-1 px-4 py-2.5 border-2 border-gray-300 rounded-xl 
               focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm transition-all duration-150"
        placeholder="e.g., MANAGE_USERS"
      />
    </label>

    <!-- Action Buttons -->
    <div class="flex justify-end gap-3">
      <button
        class="px-5 py-2 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-all duration-150 shadow-sm"
        (click)="closeModal()"
      >
        Cancel
      </button>

      <button
        (click)="isEditing ? updatePermission() : createPermission()"
        class="px-6 py-2 text-white rounded-xl shadow-md transition-all duration-150 active:scale-95"
        [ngClass]="isEditing ? 'bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-300' : 'bg-green-600 hover:bg-green-700 focus:ring-green-300'"
      >
        {{ isEditing ? 'Update' : 'Create' }}
      </button>
    </div>

  </div>
</div>
