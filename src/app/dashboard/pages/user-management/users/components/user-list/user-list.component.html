<div class="font-sans">
  <div class="max-w-7xl mx-auto bg-white shadow-2xl rounded-3xl p-6 sm:p-10 transition-all duration-300">

    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4 border-b pb-4">
      <h2 class="text-3xl sm:text-4xl font-extrabold text-gray-900">
        System Users Management
      </h2>
      
      <div class="flex flex-col sm:flex-row gap-3 w-full sm:w-auto">
        
        <div class="relative w-full sm:w-64">
          <input 
            type="text" 
            placeholder="Search by username or email..."
            class="w-full pl-10 pr-4 py-2.5 text-sm border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
            [(ngModel)]="searchTerm"
            (input)="searchList()"
          />
          <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </div>
        
        <button (click)="openCreateUser()" type="button"
          class="px-6 py-2.5 bg-emerald-600 text-white rounded-xl text-sm font-semibold shadow-md hover:bg-emerald-700 transition-all duration-150 active:scale-95 focus:ring focus:ring-emerald-300 focus:ring-offset-2 w-full sm:w-auto">
          <span class="inline-flex items-center">
             <svg class="h-5 w-5 mr-1.5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
             </svg>
             Create New User
          </span>
        </button>
      </div>
    </div>

    <div class="overflow-x-auto shadow-lg rounded-xl border border-gray-200">
      <table class="w-full border-collapse min-w-[800px]">
        
        <thead class="bg-gray-800 text-white sticky top-0 shadow-md">
          <tr>
            <th class="px-6 py-4 text-left text-sm font-medium rounded-tl-xl">ID</th>
            <th class="px-6 py-4 text-left text-sm font-medium">Username</th>
            <th class="px-6 py-4 text-left text-sm font-medium">Email</th>
            <th class="px-6 py-4 text-left text-sm font-medium">Unit</th>
            <th class="px-6 py-4 text-center text-sm font-medium rounded-tr-xl">Actions</th>
          </tr>
        </thead>
        
        <tbody class="bg-white divide-y divide-gray-100">
          <tr 
              *ngFor="let user of users; even as isEven" 
              class="border-t border-gray-100 transition-colors hover:bg-blue-50"
              [class.bg-white]="!isEven"
              [class.bg-gray-50]="isEven">
              
            <td class="px-6 py-4 text-sm font-medium text-gray-800">{{ user.id }}</td>
            <td class="px-6 py-4 text-sm text-gray-700 font-semibold">{{ user.username }}</td>
            <td class="px-6 py-4 text-sm text-gray-600">{{ user.email }}</td>
            <td class="px-6 py-4 text-sm text-gray-600">{{ user.unit?.name }}</td>
            <td class="px-6 py-4 text-center text-sm space-x-3">
              
              <button [routerLink]="['details', user.id]" 
                class="px-4 py-2 bg-blue-600 text-white rounded-full text-sm font-medium shadow-sm hover:bg-blue-700 transition-all duration-150 active:scale-95 focus:ring focus:ring-blue-300">
                Open Details
              </button>
              
              <button 
                class="px-4 py-2 bg-red-600 text-white rounded-full text-sm font-medium shadow-sm hover:bg-red-700 transition-all duration-150 active:scale-95 focus:ring focus:ring-red-300">
                Deactivate
              </button>
            </td>
          </tr>
          <tr *ngIf="!users || users.length === 0">
            <td colspan="5" class="text-center p-8 text-lg text-gray-500 bg-gray-50">
              No users found matching your search criteria.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>