<div class="max-w-3xl mx-auto bg-white shadow-lg rounded-lg p-6 mt-10">
  <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">
    Stock Transfer
  </h2>

  <form [formGroup]="transferForm" (ngSubmit)="submitTransfer()" class="space-y-5">

   <!-- Source Store -->
<div>
  <label class="block text-gray-700 font-medium mb-2">Source Store</label>
  <select
    class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
    (change)="onSourceStoreSelected($any($event.target).value)"
  >
    <option value="">Select Source Store</option>
    <option
      *ngFor="let store of primaryStores"
      [value]="store.id"
    >
      {{ store.name }} ({{ store.unit?.name }})
    </option>
  </select>
</div>

    <!-- Item -->
    <div>
      <label class="block text-gray-700 font-medium mb-2">Item</label>
      <select
        formControlName="itemId"
        class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
      >
        <option value="">Select Item</option>
        <option *ngFor="let item of items" [value]="item.id">
          {{ item.name }}
        </option>
      </select>
      <small *ngIf="transferForm.get('itemId')?.invalid && transferForm.get('itemId')?.touched" class="text-red-500">
        Please select an item
      </small>
    </div>

    <!-- Quantity -->
    <div>
      <label class="block text-gray-700 font-medium mb-2">Quantity</label>
      <input
        type="number"
        formControlName="quantity"
        placeholder="Enter quantity"
        class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
      />
      <small *ngIf="transferForm.get('quantity')?.invalid && transferForm.get('quantity')?.touched" class="text-red-500">
        Quantity must be at least 1
      </small>
    </div>

    <!-- Reason -->
    <div>
      <label class="block text-gray-700 font-medium mb-2">Reason</label>
      <textarea
        formControlName="reason"
        rows="3"
        placeholder="Enter transfer reason"
        class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
      ></textarea>
      <small *ngIf="transferForm.get('reason')?.invalid && transferForm.get('reason')?.touched" class="text-red-500">
        Please provide a reason
      </small>
    </div>

    <!-- Destination Store -->
    <div>
      <label class="block text-gray-700 font-medium mb-2">Destination Store</label>
      <select
        formControlName="destinationStoreId"
        class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
      >
        <option value="">Select Destination Store</option>
        <option *ngFor="let store of destinationStores" [value]="store.id">
          {{ store.name }} ({{ store.storeType }} - {{ store.unit.name }})
        </option>
      </select>
      <small *ngIf="transferForm.get('destinationStoreId')?.invalid && transferForm.get('destinationStoreId')?.touched" class="text-red-500">
        Please select a destination store
      </small>
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      [disabled]="loading || transferForm.invalid"
      class="w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700 disabled:bg-gray-400 transition-colors duration-200"
    >
      {{ loading ? 'Processing...' : 'Submit Transfer' }}
    </button>
  </form>
</div>
