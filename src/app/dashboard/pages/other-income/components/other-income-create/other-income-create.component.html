<div class="container mx-auto px-4 py-6 max-w-4xl">
  <div class="bg-white shadow-2xl rounded-xl p-6">
    <!-- Header -->
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold text-gray-800">Create Other Income</h2>
      <button
        (click)="goBackToList()"
        class="flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        Back to List
      </button>
    </div>

    <!-- Form -->
    <form [formGroup]="incomeForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <!-- Budget Line Item ID -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Budget Line Item ID <span class="text-red-500">*</span>
        </label>
        <input
          type="number"
          formControlName="budgetLineItemId"
          min="1"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          [class.border-red-500]="isFieldInvalid('budgetLineItemId')"
        />
        <p *ngIf="isFieldInvalid('budgetLineItemId')" class="mt-1 text-sm text-red-600">
          {{ getFieldError('budgetLineItemId') }}
        </p>
      </div>

      <!-- Amount -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Amount <span class="text-red-500">*</span>
        </label>
        <input
          type="number"
          formControlName="amount"
          step="0.01"
          min="0.01"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          [class.border-red-500]="isFieldInvalid('amount')"
        />
        <p *ngIf="isFieldInvalid('amount')" class="mt-1 text-sm text-red-600">
          {{ getFieldError('amount') }}
        </p>
      </div>

      <!-- Source -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Source <span class="text-red-500">*</span>
        </label>
        <input
          type="text"
          formControlName="source"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          [class.border-red-500]="isFieldInvalid('source')"
          placeholder="Enter income source"
        />
        <p *ngIf="isFieldInvalid('source')" class="mt-1 text-sm text-red-600">
          {{ getFieldError('source') }}
        </p>
      </div>

      <!-- Reference -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Reference <span class="text-red-500">*</span>
        </label>
        <input
          type="text"
          formControlName="reference"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          [class.border-red-500]="isFieldInvalid('reference')"
          placeholder="Enter reference number"
        />
        <p *ngIf="isFieldInvalid('reference')" class="mt-1 text-sm text-red-600">
          {{ getFieldError('reference') }}
        </p>
      </div>

      <!-- Payment Method -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Payment Method <span class="text-red-500">*</span>
        </label>
        <select
          formControlName="paymentMethod"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          [class.border-red-500]="isFieldInvalid('paymentMethod')"
        >
          <option value="">Select payment method</option>
          <option *ngFor="let method of paymentMethods" [value]="method">{{ method }}</option>
        </select>
        <p *ngIf="isFieldInvalid('paymentMethod')" class="mt-1 text-sm text-red-600">
          {{ getFieldError('paymentMethod') }}
        </p>
      </div>

      <!-- Account ID (Optional) -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Account ID (Optional)
        </label>
        <select
          formControlName="accountId"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        >
          <option value="">Select bank account (optional)</option>
          <option *ngFor="let account of bankAccounts" [value]="account.id">{{ account.accountName || account.accountNumber }}</option>
        </select>
      </div>

      <!-- Notes -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Notes
        </label>
        <textarea
          formControlName="notes"
          rows="4"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          placeholder="Optional notes about this income"
        ></textarea>
      </div>

      <!-- Submit Button -->
      <div class="flex justify-end gap-3 pt-4 border-t">
        <button
          type="button"
          (click)="goBackToList()"
          class="px-5 py-2 border border-gray-400 rounded-lg text-gray-700 hover:bg-gray-100 transition"
        >
          Cancel
        </button>
        <button
          type="submit"
          [disabled]="isLoading || incomeForm.invalid"
          class="px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <span *ngIf="!isLoading">Create Income</span>
          <span *ngIf="isLoading">Creating...</span>
        </button>
      </div>
    </form>
  </div>
</div>
